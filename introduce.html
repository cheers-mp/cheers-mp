<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>介绍 | Cheers-mp</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Almost 零配置小程序脚手架(゜-゜)つロ 干杯~">
    <link rel="preload" href="/assets/css/0.styles.ff5aac71.css" as="style"><link rel="preload" href="/assets/js/app.2ca081af.js" as="script"><link rel="preload" href="/assets/js/2.8275b49c.js" as="script"><link rel="preload" href="/assets/js/11.b69bae79.js" as="script"><link rel="prefetch" href="/assets/js/10.d0c21293.js"><link rel="prefetch" href="/assets/js/12.5d16c7d8.js"><link rel="prefetch" href="/assets/js/3.7c43aa63.js"><link rel="prefetch" href="/assets/js/4.0ea5a392.js"><link rel="prefetch" href="/assets/js/5.032ced34.js"><link rel="prefetch" href="/assets/js/6.80973f90.js"><link rel="prefetch" href="/assets/js/7.a38c3c40.js"><link rel="prefetch" href="/assets/js/8.97e9df38.js"><link rel="prefetch" href="/assets/js/9.5e000fed.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff5aac71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cheers-mp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/bigmeow/cheers-mp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/bigmeow/cheers-mp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/introduce.html" class="active sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/introduce.html#定位" class="sidebar-link">定位</a></li><li class="sidebar-sub-header"><a href="/introduce.html#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/introduce.html#为什么不是" class="sidebar-link">为什么不是...?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/introduce.html#webpack" class="sidebar-link">webpack</a></li><li class="sidebar-sub-header"><a href="/introduce.html#mpx、chameleon" class="sidebar-link">mpx、chameleon</a></li></ul></li></ul></li><li><a href="/start.html" class="sidebar-link">开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/start.html#创建新项目（暂不可用）" class="sidebar-link">创建新项目（暂不可用）</a></li><li class="sidebar-sub-header"><a href="/start.html#已有的原生小程序使用" class="sidebar-link">已有的原生小程序使用</a></li><li class="sidebar-sub-header"><a href="/start.html#维护的仓库包" class="sidebar-link">维护的仓库包</a></li><li class="sidebar-sub-header"><a href="/start.html#项目推荐目录结构" class="sidebar-link">项目推荐目录结构</a></li></ul></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CLI 服务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cli-service/command.html" class="sidebar-link">使用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cli-service/command.html#约定" class="sidebar-link">约定</a></li><li class="sidebar-sub-header"><a href="/cli-service/command.html#cheers-mp-service-serve" class="sidebar-link">cheers-mp-service serve</a></li><li class="sidebar-sub-header"><a href="/cli-service/command.html#cheers-mp-service-build" class="sidebar-link">cheers-mp-service build</a></li><li class="sidebar-sub-header"><a href="/cli-service/command.html#查看所有的可用命令" class="sidebar-link">查看所有的可用命令</a></li></ul></li><li><a href="/cli-service/env-mode.html" class="sidebar-link">环境变量和模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cli-service/env-mode.html#模式" class="sidebar-link">模式</a></li><li class="sidebar-sub-header"><a href="/cli-service/env-mode.html#示例：staging-模式" class="sidebar-link">示例：Staging 模式</a></li><li class="sidebar-sub-header"><a href="/cli-service/env-mode.html#在客户端侧代码中使用环境变量" class="sidebar-link">在客户端侧代码中使用环境变量</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>最佳实践</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/code/demo1.html" class="sidebar-link">需求 1</a></li><li><a href="/code/demo2.html" class="sidebar-link">需求 2</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p>从使用 <a href="https://github.com/mpvue" target="_blank" rel="noopener noreferrer">mpvue（美团）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 、参与 <a href="http://megalojs.org/#/" target="_blank" rel="noopener noreferrer">megalo（网易）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 小程序框架的开发，一路坑踩过来，随着它们的停止维护，让我觉得自己仿佛是一路见证了小程序生态的繁荣和沉淀，虽然我很看好的 <a href="https://github.com/nervjs/taro" target="_blank" rel="noopener noreferrer">Taro Next（京东）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 正式版发布在即， 却感觉自己仿佛四大皆空...</p> <p>我们原本使用框架的目的是提高工作效率、减少学习成本、可以用自己熟悉的技术栈去写项目，在这之余，接触这些框架可以学习它们的理念以提高自己的技术，但踩坑时间大于项目开发的时间的时候，就本末倒置了 。我也希望我可以不去看小程序文档，直接用自己喜欢的<code>vue</code> 直接撸完然后编译一下就变成小程序了，不用操心太多，但事实是到目前为止，无论你用哪个框架，都无法做到也不可能做到，<strong>框架帮你解决了一些问题的同时总会带来一些其它的问题，这并非使用框架不好，这只是一个平衡的选择</strong>，坦然接受并做好解决问题的准备即可。</p> <p>所以像<code>Taro Next</code>这类优秀框架其实能做到 70%+ 让你的小程序项目看起来似乎是 web 标准的项目，共用一部分<code>web</code>生态,而剩下 20% 的差异化以及 10% 的未知的可能遇见的坑则会让你苦不堪言。基于此，那就全面拥抱原生小程序吧，当然也不能放弃挣扎，在拥抱原生的基础上尝试去改善原生的开发体验（有点像当了 XX 还要立牌坊的感觉）... Emm ... 总而言之, <a href="https://github.com/bigmeow/cheers-mp" target="_blank" rel="noopener noreferrer">cheers-mp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 就这样诞生了。</p> <p>至于命名嘛，因为公司名字和 <code>cheers</code> 谐音，也取项目完成后干杯庆祝之意，优（简）雅（单）内（粗）涵（暴）。</p> <h2 id="定位"><a href="#定位" class="header-anchor">#</a> 定位</h2> <p>它不是一个框架，它只是一个轻量化的、可挂载的渐进式脚手架工具。</p> <p>它不会帮你把 <code>vue</code> 代码转换成小程序代码， 也不创造新的语法糖，一个好用的语法糖背后可能存在 N 层 <code>AST</code> 编译转换，在精力有限得情况下，做得越多，bug 就可能越多（这个从各大框架的 <code>issue</code> 里就可以看出来，哈哈，当然这也不能是脚手架功能少的理由）。</p> <p>所以，我希望的小程序脚手架是这样的：</p> <ul><li>支持插件化。将开发中遇到的可以通过自动化流程解决的痛点（不便）以插件形式集成进去；</li> <li>功能可开关。脚手架可能提供了很多功能，但我有选择用与不用以及用多少的权利；</li> <li>无缝化升级。脚手架升级直接改个版本号重新安装下即可，不需要自己去反复比对更新，拷贝代码;</li> <li>可修改配置. 框架默认的配置可能不是我想要的，需要有个能编程修改的入口;</li> <li>完全拥抱原生，渐进式可插拔，不做多余的语法糖、运行时，为了这个原则，之前考虑过的 <code>SFC</code> 需求也放弃掉了</li></ul> <p>在做到上面基础上，功能的增强其实就只是时间和人手问题了。</p> <h2 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h2> <ul><li>拥抱原生小程序。只在原生的基础上增强，不削弱原生已有的任何能力;</li> <li>可能是第一个支持自动化 CI 的脚手架，支持自动构建 NPM、自动上传预览版;</li> <li>Typescript 开发体验良好，帮你配置好了 TS 需要的小程序环境，绝不是小程序开发工具帮你创建的默认的半成品 TS 项目模板。简单说...拎包入住~（当然也支持 js）</li> <li>内置预处理 less、scss;</li> <li>内置环境变量、模式配置，随心所欲切换开发、生产环境;</li> <li>配置好账号信息，可在生产构建时自动将 wxml、css 中使用到的图片上传到阿里云 OSS、七牛云 OSS 上，并自动替换掉代码中相应的图片路径。同时你可以保留的选择某些图片不上传的权利。</li> <li>多小程序开发账号支持，随心切换 <code>appid</code></li> <li>提供依赖分析工具，让你项目中哪些文件是没有用到的（即将到来）</li> <li>无缝化升级、支持修改默认配置，尽量向<code>vue-cli</code>看齐</li> <li>已有的原生小程序项目基本无需特别改造即可快速引入</li></ul> <h2 id="为什么不是"><a href="#为什么不是" class="header-anchor">#</a> 为什么不是...?</h2> <h3 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h3> <p><code>cheers-mp</code> 采用了 <code>gulp</code> 而不是 <code>webpack</code> 作为它的核心编译工具，理由如下：</p> <ul><li><code>cheers-mp</code> 不做模块化。所有的模块化、依赖分析都交给小程序开发者工具自己去处理，从官方文档可知，微信小程序开发者工具本身就内置了 <code>webpack</code> 来进行编译，从 <code>cheers-mp</code> 本身的工具属性定位来看，它只处理一些必要的编译工作（比如帮你替换图片 CDN、编译 <code>less</code>、将 <code>ts</code> 编译成 <code>es6</code> 等），我希望编译后的代码更接近于源码，能保证它职责的单一性，而不是被模块化成一锅粥（相信大家都看过被 <code>webpack</code> 处理后的代码）。</li> <li><code>cheers-mp</code> 使用小程序自己的 <code>NPM构建</code>，贴近原生自己的生态。如果用了<code>webpack</code>，那么基于它的“万物皆模块” 的特性，你所有的 <code>import</code> 将被 <code>webpack</code> 处理掉，这样你就没法使用官方提供的<code>构建NPM</code> 功能了。</li></ul> <p>当然，有利也有弊，不用<code>webpack</code> 就没太好的办法做 <code>Tree Shaking</code> 来减少未使用到的代码，但我相信未来官方工具会支持。在这之前， <code>cheers-mp</code> 会提供一个单独的依赖分析插件来告诉你哪些文件你是没有用到的。</p> <p>第二就是 <code>gulp</code> 的生态目前还比不上繁荣的 <code>webpack</code>, 但就目前来说，作为 <code>webpack</code> 的前辈也够用了，实在没有的 <code>gulp</code> 插件， 只能自己手撸了。</p> <h3 id="mpx、chameleon"><a href="#mpx、chameleon" class="header-anchor">#</a> mpx、chameleon</h3> <p>坦率的讲，<a href="https://github.com/didi/mpx" target="_blank" rel="noopener noreferrer">mpx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a href="https://github.com/didi/chameleon" target="_blank" rel="noopener noreferrer">chameleon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>都是很优秀方案，贴近原生，又有增强的运行时优化和多平台编译，配套设施完整，不过和我需要的定位略有冲突，它并未完全拥抱原生，用了 <code>webpack</code> ，定义了某些好用的类 vue 语法糖, 有些“不伦不类”： 可能在我看来，要么就完全拥抱标准，要么就全面投向小程序原生（虽然小程序本身就不是标准的产物），中间态就觉得很难受，似猫非猫？</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bigmeow/cheers-mp/edit/master/introduce.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/21/2020, 10:40:16 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/start.html">
        开始
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2ca081af.js" defer></script><script src="/assets/js/2.8275b49c.js" defer></script><script src="/assets/js/11.b69bae79.js" defer></script>
  </body>
</html>
